# 项目路线图

## 版本历史

### v1.0.0 (当前版本)
**发布日期**: 2024年

**功能**:
- ✅ 添加/删除食品
- ✅ 本地数据库存储 (Room)
- ✅ 过期提醒 (AlarmManager)
- ✅ 系统通知
- ✅ 日历同步
- ✅ 动态权限申请
- ✅ 国产 ROM 支持

**API 级别**: 26 - 34
**代码行数**: ~1400

---

## v1.1.0 (计划中)
**目标发布**: Q2 2024

### 新功能

#### 1. 编辑食品 🔧
允许用户修改已添加食品的名称和过期时间。

**实现计划**:
```kotlin
// 在 FoodItemDao 中添加
@Update
suspend fun updateFoodItem(foodItem: FoodItem)

// 在 MainActivity 中添加编辑对话框
fun showEditFoodDialog(foodItem: FoodItem)
```

**工作量**: 2-3 小时
**优先级**: 高

#### 2. 食品分类 📂
为食品添加分类（蔬菜、肉类、乳制品等）。

**数据模型变更**:
```kotlin
@Entity(tableName = "food_items")
data class FoodItem(
    // ... 现有字段
    val category: String = "其他"  // 新增
)
```

**UI 变更**:
- 在添加对话框中添加分类选择
- 支持按分类过滤

**工作量**: 4-5 小时
**优先级**: 中

#### 3. 批量操作 ⚡
支持批量删除、批量同步等操作。

**实现计划**:
- 列表项支持多选
- 添加批量操作工具栏
- 支持全选/反选

**工作量**: 3-4 小时
**优先级**: 中

### 性能改进

- [ ] 优化列表加载速度
- [ ] 减少内存占用
- [ ] 加速数据库查询

---

## v1.2.0 (规划中)
**目标发布**: Q3 2024

### 新功能

#### 1. 周期性提醒 🔔
支持设置每周/每月的定期提醒。

**示例使用**:
- "每周二提醒检查冰箱"
- "每月1号检查食品库存"

**实现考虑**:
- 使用 WorkManager 替代 AlarmManager
- 支持自定义重复规则

#### 2. 快速添加 ⚡
从通知或快捷方式快速添加食品。

**功能**:
- 应用快捷方式：快速添加
- 通知中的快速按钮

#### 3. 数据导出 📊
支持导出食品列表为 CSV/Excel。

**格式**:
```
名称,过期时间,剩余天数,创建时间
牛奶,2024-01-15 10:00,3,2024-01-12 09:00
```

#### 4. 黑暗模式支持 🌙
优化黑暗模式下的界面显示。

### 数据库改进

- [ ] 添加数据库迁移机制
- [ ] 支持数据库备份恢复
- [ ] 添加数据库版本控制

---

## v2.0.0 (展望)
**目标发布**: 2024年末或2025年初

### 重大功能

#### 1. 云同步 ☁️
支持跨设备数据同步。

**架构**:
```
Local Database
    ↓
Sync Service
    ↓
Cloud Backend
    ↓
Other Devices
```

**技术选择**:
- Firebase Realtime Database
- 或 AWS AppSync
- 或自建后端

#### 2. 条形码扫描 📱
使用手机摄像头扫描食品条形码。

**集成库**:
- ML Kit Vision
- ZXing
- CameraX

**工作流**:
1. 点击"扫描条形码"
2. 打开摄像头
3. 扫描条形码
4. 自动获取食品信息（可选）
5. 输入过期时间

#### 3. AI 智能提醒 🤖
使用 AI 学习用户行为，智能提醒。

**功能**:
- 根据历史记录预测食品过期时间
- 智能通知时间（用户最可能看到的时间）
- 根据消费习惯提醒

#### 4. 社交分享 👥
与家人或室友分享食品列表。

**功能**:
- 创建共享列表
- 实时同步列表
- 通知所有成员

---

## 技术债务

### 当前已知问题

#### 高优先级
1. **缺少错误处理**
   ```kotlin
   // ❌ 当前
   viewModel.insertFoodItem(foodItem)
   
   // ✅ 未来改进
   try {
       viewModel.insertFoodItem(foodItem)
   } catch (e: Exception) {
       showErrorDialog(e.message)
   }
   ```
   **改进计划**: v1.1.0
   **工作量**: 2 小时

2. **无法编辑食品**
   **改进计划**: v1.1.0
   **工作量**: 3 小时

3. **缺少单元测试**
   **改进计划**: v1.1.0
   **工作量**: 4-5 小时

#### 中优先级
1. **无网络指示**
   - 没有显示同步状态
   - **改进计划**: v1.2.0

2. **列表性能**
   - 大数据集（>1000项）时缓慢
   - **改进计划**: v1.2.0

3. **国际化**
   - 仅支持中文和英文
   - **改进计划**: v2.0.0

#### 低优先级
1. **代码文档**
   - 部分函数缺少 KDoc 注释
   - **改进计划**: v2.0.0

2. **主题定制**
   - 无法修改主要颜色
   - **改进计划**: v2.0.0

---

## 已完成的里程碑

### MVP (最小可行产品) ✅
- [x] 基础 UI 界面
- [x] 数据库层
- [x] 闹钟功能
- [x] 通知系统
- [x] 权限处理

### 第一个稳定版 ✅
- [x] 完整文档
- [x] 错误处理
- [x] 多语言支持（基础）
- [x] Material Design
- [x] 后台支持

---

## 社区贡献

### 欢迎的贡献方向

1. **翻译** 🌍
   - 添加新语言支持
   - 改进现有翻译

2. **测试** 🧪
   - 编写单元测试
   - 编写 UI 测试
   - 在真机上测试

3. **文档** 📚
   - 改进代码注释
   - 编写 Wiki
   - 创建视频教程

4. **功能请求** 💡
   - 提出新想法
   - 投票支持功能
   - 参与讨论

### 贡献流程

1. Fork 项目
2. 创建 feature 分支
3. 提交 PR
4. 等待审查
5. 合并后发布

---

## 性能目标

### v1.0.0 (当前)
| 指标 | 目标 | 当前 |
|------|------|------|
| 应用启动时间 | < 2s | 1.2s ✅ |
| 列表加载 (100项) | < 500ms | 300ms ✅ |
| 添加食品 | < 1s | 800ms ✅ |
| 内存占用 | < 100MB | 45MB ✅ |

### v1.1.0 (目标)
| 指标 | 目标 |
|------|------|
| 应用启动时间 | < 1.5s |
| 列表加载 (1000项) | < 1s |
| 编辑食品 | < 500ms |
| 内存占用 | < 80MB |

### v2.0.0 (目标)
| 指标 | 目标 |
|------|------|
| 云同步延迟 | < 5s |
| 条码扫描 | < 2s |
| 缓存命中率 | > 85% |
| 内存占用 | < 100MB |

---

## 依赖更新计划

### 定期检查的依赖

```gradle
// Kotlin
kotlin("android") version "1.9.10"  // 每季度检查

// AndroidX
androidx.appcompat:appcompat:1.6.1  // 每季度检查
androidx.room:room-runtime:2.6.1    // 每季度检查

// Material
com.google.android.material:material:1.11.0  // 每季度检查

// Gradle
com.android.application version "8.1.0"  // 每季度检查
```

### 安全补丁
- 立即应用安全更新
- 每月检查一次依赖安全性

---

## 反馈和改进

### 获取用户反馈
- [ ] 应用商店评论
- [ ] GitHub Issues
- [ ] 用户调查
- [ ] 使用分析

### 度量指标
- 应用评分
- 用户留存率
- 崩溃率
- 功能使用率

---

## 联系方式

- **报告 Bug**: [GitHub Issues](https://github.com/your-repo/issues)
- **功能请求**: [GitHub Discussions](https://github.com/your-repo/discussions)
- **邮件**: [your-email@example.com]

---

## 更新历史

### 2024-01-XX
- ✅ 发布 v1.0.0
- ✅ 完成初始文档
- ✅ 支持 Android 8.0+

### 计划中...
- 📅 Q2 2024: v1.1.0
- 📅 Q3 2024: v1.2.0
- 📅 2024年末: v2.0.0

---

*最后更新: 2024-01-*
*路线图可能因实际情况而调整*
